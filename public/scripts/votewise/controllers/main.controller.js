'use strict';
var _ = require('lodash');
var controllername = 'main';

module.exports = function(app) {
    var fullname = app.name + '.' + controllername;
    /*jshint validthis: true */
    var deps = [
        '$scope',
        '$state',
        'main.votewise.PoliticianLibrary',
        'main.votewise.User'
    ];

    function controller($scope, $state, PoliticianLibrary, User) {
        $scope.store = $scope.store ||  {hideMainHeader: true} // JSON.parse('{"hideMainHeader":false,"userInfo":{"id":19,"userName":"box","passwordHash":"$2a$10$cLzezsNrM0tKS5xQcNBDbuWmxF6ad/nP1dOOrLiX4M.HOdfuCXNIm","email":"box@box.com","phone":null,"address":null,"city":"box","state":"pa","county":"box","district":"box","firstName":null,"lastName":null,"type":"voter","active":null,"answerCount":105,"userLevel":null,"Groups":[],"Parties":[{"name":"Rampantlighter Iguana","UserParties":{"id":7,"party":4,"user":19,"createdAt":"2016-02-08T03:35:06.000Z","createdBy":null,"updatedAt":"2016-02-08T03:35:06.000Z","updatedBy":null}},{"name":"Linenbane Spider","UserParties":{"id":8,"party":2,"user":19,"createdAt":"2016-02-08T03:35:06.000Z","createdBy":null,"updatedAt":"2016-02-08T03:35:06.000Z","updatedBy":null}}]},"user":19,"politicianLibrary":{"city":[{"id":1,"name":"Powercarpet Weasel","state":"PA","city":"Philadelphia","county":"Paperlightning Finger","createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-23T17:50:12.000Z","updatedBy":null,"Politicians":[{"id":1,"name":"Slimelynx Bat","user":27,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":50,"createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-24T20:45:53.000Z","updatedBy":null,"PoliticianDistricts":{"id":19,"politician":1,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:15"},{"id":2,"name":"Azurewalker Crest","user":28,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-24T20:46:48.000Z","updatedBy":null,"PoliticianDistricts":{"id":20,"politician":2,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:16"},{"id":6,"name":"frodo","user":26,"type":"politician","party":"dem","office":"mayor","incumbent":true,"website":null,"endorsements":null,"resume":null,"statement":null,"performanceReview":null,"answerCount":1,"createdAt":"2016-01-23T15:35:09.000Z","createdBy":null,"updatedAt":"2016-01-23T20:36:36.000Z","updatedBy":null,"PoliticianDistricts":{"id":24,"politician":6,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:57"},{"id":7,"name":"Vividdrifter Iguana","user":null,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"PoliticianDistricts":{"id":25,"politician":7,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:17"},{"id":8,"name":"Micadolphin Ant","user":null,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"PoliticianDistricts":{"id":26,"politician":8,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:18"}]},{"id":2,"name":"Almondboot Salmon","state":"PA","city":"Philadelphia","county":"Diamondllama Chopper","createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-23T17:50:12.000Z","updatedBy":null,"Politicians":[]},{"id":3,"name":"Amberspeaker Bolt","state":"PA","city":"Philadelphia","county":"Spectrumarm Stag","createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-23T17:50:12.000Z","updatedBy":null,"Politicians":[]},{"id":4,"name":"Speckleterrier Butterfly","state":"PA","city":"Philadelphia","county":"Fieldcub Fright","createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"Politicians":[]},{"id":5,"name":"Crazygecko Cub","state":"PA","city":"Philadelphia","county":"Vividseer Braid","createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"Politicians":[]},{"id":6,"name":"Daisyarm Hunter","state":"PA","city":"Philadelphia","county":"Palmloon Soarer","createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"Politicians":[]}],"county":[],"state":[{"id":1,"name":"Powercarpet Weasel","state":"PA","city":"Philadelphia","county":"Paperlightning Finger","createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-23T17:50:12.000Z","updatedBy":null,"Politicians":[{"id":1,"name":"Slimelynx Bat","user":27,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":50,"createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-24T20:45:53.000Z","updatedBy":null,"PoliticianDistricts":{"id":19,"politician":1,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null}},{"id":2,"name":"Azurewalker Crest","user":28,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-24T20:46:48.000Z","updatedBy":null,"PoliticianDistricts":{"id":20,"politician":2,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null}},{"id":6,"name":"frodo","user":26,"type":"politician","party":"dem","office":"mayor","incumbent":true,"website":null,"endorsements":null,"resume":null,"statement":null,"performanceReview":null,"answerCount":1,"createdAt":"2016-01-23T15:35:09.000Z","createdBy":null,"updatedAt":"2016-01-23T20:36:36.000Z","updatedBy":null,"PoliticianDistricts":{"id":24,"politician":6,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null}},{"id":7,"name":"Vividdrifter Iguana","user":null,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"PoliticianDistricts":{"id":25,"politician":7,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null}},{"id":8,"name":"Micadolphin Ant","user":null,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"PoliticianDistricts":{"id":26,"politician":8,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null}}]},{"id":2,"name":"Almondboot Salmon","state":"PA","city":"Philadelphia","county":"Diamondllama Chopper","createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-23T17:50:12.000Z","updatedBy":null,"Politicians":[]},{"id":3,"name":"Amberspeaker Bolt","state":"PA","city":"Philadelphia","county":"Spectrumarm Stag","createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-23T17:50:12.000Z","updatedBy":null,"Politicians":[]},{"id":4,"name":"Speckleterrier Butterfly","state":"PA","city":"Philadelphia","county":"Fieldcub Fright","createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"Politicians":[]},{"id":5,"name":"Crazygecko Cub","state":"PA","city":"Philadelphia","county":"Vividseer Braid","createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"Politicians":[]},{"id":6,"name":"Daisyarm Hunter","state":"PA","city":"Philadelphia","county":"Palmloon Soarer","createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"Politicians":[]}]},"partitionedPols":[[{"id":1,"name":"Slimelynx Bat","user":27,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":50,"createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-24T20:45:53.000Z","updatedBy":null,"PoliticianDistricts":{"id":19,"politician":1,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:15"},{"id":2,"name":"Azurewalker Crest","user":28,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-23T17:50:12.000Z","createdBy":null,"updatedAt":"2016-01-24T20:46:48.000Z","updatedBy":null,"PoliticianDistricts":{"id":20,"politician":2,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:16"},{"id":7,"name":"Vividdrifter Iguana","user":null,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"PoliticianDistricts":{"id":25,"politician":7,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:17"},{"id":8,"name":"Micadolphin Ant","user":null,"type":"politician","party":"Chess","office":"Superintendent","incumbent":true,"website":"pepperoni.com","endorsements":"thing","resume":"Flying ghost pizza","statement":"not enough mozzerella","performanceReview":"Extreme","answerCount":null,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null,"PoliticianDistricts":{"id":26,"politician":8,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:18"}],[{"id":6,"name":"frodo","user":26,"type":"politician","party":"dem","office":"mayor","incumbent":true,"website":null,"endorsements":null,"resume":null,"statement":null,"performanceReview":null,"answerCount":1,"createdAt":"2016-01-23T15:35:09.000Z","createdBy":null,"updatedAt":"2016-01-23T20:36:36.000Z","updatedBy":null,"PoliticianDistricts":{"id":24,"politician":6,"district":1,"createdAt":"2016-01-24T19:10:49.000Z","createdBy":null,"updatedAt":"2016-01-24T19:10:49.000Z","updatedBy":null},"$$hashKey":"object:57"}]]}');

        $scope.name = fullname;
        console.log(fullname);


        var activate = function() {
        };
        activate();

        $scope.moveToQuestions = function() {
            $state.go('main.topics');
        };

        $scope.moveToSettings = function(){
            $state.go('main.settings');
        };
        
        $scope.moveToComparisons = function(type) {

            if (type === "voter"){
                PoliticianLibrary.get( { whereProp: 'city', whereVal: 'Philadelphia' }, function(result){
                    $scope.store.politicianLibrary = result;
                    $state.go('main.politicianLibrary');
                });
            } else if (type === "politician"){
                $state.go('main.pollingLibrary');
            }

        };

    }
    controller.$inject = deps;
    app.controller(fullname, controller);
};